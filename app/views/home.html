<div class="row">
  <div class="col-md-12">
      <h2>Etape 1 - Choisir le fichier source</h2>
      <label for="inputExcel">Choisr le fichier Excel source</label>
  </div>
</div>
<div class="row">
  <div class="col-md-4">
      <form role="form">
          <div class="form-group">
            <input type="file" name="excelSource" ng-file-select="onFileSelect($files)" multiple class="form-control">
          </div>
      </form>
  </div>
  <div class="col-md-4">
    <button type="button" class="btn btn-sm btn-primary" ng-click="uploadFile($files)">Upload</button>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <div ng-show="addresses.length > 0">
      <h5>{{addresses.length}} addresses found</h5>
    </div>
    <div ng-show="uploadError != null">
      <h5 class="text-danger">Aucune adresse trouv&eacute;e: {{uploadError}}</h5>
    </div>
  </div>
</div>


<div class="row" ng-show="addresses.length > 0">
  <div class="col-md-12">
      <h2>Etape 2 - Definir le nombre de pages</h2>
  </div>
</div>

<form role="form" ng-show="addresses.length > 0">
  <div class="row">
    <div class="col-md-4">
      <label for="pages">Entrer le nombre de pages du journal</label>
    </div>
  </div>
  <div class="row">
    <div class="col-md-1">
      <div class="form-group">
        <input type="text" name="pages" ng-model="numberOfPages" class="form-control">
      </div>
    </div>
    <div class="col-md-2">
      <button class="btn btn-primary btn-sm" ng-click="calculateShippings()">Calculer</button>
    </div>
  </div>
</form>


<div class="row" ng-show="shippings.length > 0">
  <div class="col-md-12">
      <h2>Etape 3 - Verifier les adresses</h2>
      <button class="btn btn-small btn-primary"  ng-click="generateLabels()" >Generer les etiquettes</button>
      <a class="btn btn-small btn-primary" ng-show="labelsFilename != null" href="http://localhost:5000/labels/{{labelsFilename}}">Imprimer les etiquettes</a>

      &nbsp;

      <button class="btn btn-small btn-primary" ng-show="invoiceFilename == null"ng-click="generateInvoice()" >Generer la facture</button>
      <a class="btn btn-small btn-primary" ng-show="invoiceFilename != null" href="http://localhost:5000/invoice/{{invoiceFilename}}">Imprimer la facture</a>


      <table class="table table-condensed">
        <thead>
          <th>Dest.</th>
          <th>Address</th>
          <th>Quantity</th>
          <th>Boites 15"</th>
          <th>Boites 17"</th>
          <th>Env. T7</th>
          <th>Env. T7</th>
          <th>Total</th>
        </thead>
        <tbody>
          <tr class="info">
            <td><strong>{{addresses.length}}<strong></td>
            <td></td>
            <td>{{totals.quantity}}</td>
            <td>{{totals.box15}}</td>
            <td>{{totals.box17}}</td>
            <td>{{totals.envT7}}</td>
            <td>{{totals.envT6}}</td>
            <td>{{totals.box15 + totals.box17 + totals.envT7 + totals.envT6}}</td>
          </tr>
          <tr ng-repeat="shipping in shippings">
            <td>{{shipping.address.dest}}</td>
            <td>
              <address>
                <strong>{{shipping.address.company}}</strong><br/>
                {{shipping.address.address}}, {{shipping.address.add_comp}}<br/>
                {{shipping.address.city}}, {{shipping.address.province}} {{shipping.address.zipcode}}
              </address>
            </td>
            <td>{{shipping.address.quantity}}</td>
            <td>{{shipping.box15}}</td>
            <td>{{shipping.box17}}</td>
            <td>{{shipping.envT7}}</td>
            <td>{{shipping.envT6}}</td>
            <td>{{shipping.box15 + shipping.box17 + shipping.envT7 + shipping.envT6}}</td>
          </tr>
        </tbody>
      </table>
  </div>
</div>
